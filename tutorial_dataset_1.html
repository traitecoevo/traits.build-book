<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The {traits.build} data standard, R package, and workflow - 18&nbsp; Tutorial 1: Adding a simple dataset</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tutorial_dataset_2.html" rel="next">
<link href="./tutorial_datasets.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tutorial_datasets.html">Guide to adding data</a></li><li class="breadcrumb-item"><a href="./tutorial_dataset_1.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tutorial 1: Adding a simple dataset</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The {traits.build} data standard, R package, and workflow</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">About</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./motivation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Motivation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Workflow</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./usage_examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Usage examples</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Data structure and standard</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./long_wide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Long vs Wide data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./database_standard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Data standard</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./database_structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data structure</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./database_metadata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Overview of traits.build ontology</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dictionary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Trait dictionary</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Creating with <code>traits.build</code></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./traits_build.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The package</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_compilation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Tutorial: Example compilation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./file_organisation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">File organisation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./create_dictionary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Creating a dictionary</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./adding_data_brief.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Adding datasets (brief)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./custom_R_code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Adding custom_R_code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./publishing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Publishing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Guide to adding data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Tutorial: Adding datasets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tutorial 1: Adding a simple dataset</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Tutorial 2: Adding a more complex dataset</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Tutorial 3: Adding contexts and complex units</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Tutorial 4: Additional complexities</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Tutorial 5: Multiple columns for a trait</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Tutorial 6: Data with repeat measurements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_dataset_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Tutorial 7: Adding long format dataset</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./adding_data_long.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Adding datasets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./check_dataset_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Check data quality functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_common_issues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Common issues</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Using outputs of <code>traits.build</code></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./austraits_database.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">AusTraits, Australia’s Plant Trait Database</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AusTraits_tutorial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">AusTraits tutorial</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./traits_and_climate_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Combining trait values and climate data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./spatial_data_example.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Tutorial: Using AusTraits with spatial data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./austraits_package.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">The <code>austraits</code> package</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Getting help</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./help.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Getting help</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./csv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">CSV files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./yaml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Yaml files</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="header-section-number">18.1</span> Overview</a>
  <ul class="collapse">
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals">Goals</a></li>
  <li><a href="#new-functions-introduced" id="toc-new-functions-introduced" class="nav-link" data-scroll-target="#new-functions-introduced">New Functions Introduced</a></li>
  </ul></li>
  <li><a href="#adding-tutorial_dataset_1" id="toc-adding-tutorial_dataset_1" class="nav-link" data-scroll-target="#adding-tutorial_dataset_1"><span class="header-section-number">18.2</span> Adding tutorial_dataset_1</a>
  <ul class="collapse">
  <li><a href="#ensure-the-dataset-folder-contains-the-correct-data-files" id="toc-ensure-the-dataset-folder-contains-the-correct-data-files" class="nav-link" data-scroll-target="#ensure-the-dataset-folder-contains-the-correct-data-files">Ensure the dataset folder contains the correct data files</a></li>
  <li><a href="#source-necessary-functions" id="toc-source-necessary-functions" class="nav-link" data-scroll-target="#source-necessary-functions">source necessary functions</a></li>
  <li><a href="#build_metadata" id="toc-build_metadata" class="nav-link" data-scroll-target="#build_metadata">Use functions to create a metadata.yml file</a></li>
  <li><a href="#manual-filling-in-of-metadata" id="toc-manual-filling-in-of-metadata" class="nav-link" data-scroll-target="#manual-filling-in-of-metadata">Manual filling in of metadata</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Tutorial 1: Adding a simple dataset</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="overview" class="level2" data-number="18.1">
<h2 data-number="18.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">18.1</span> Overview</h2>
<p>This is the first of five tutorials on adding datasets to your <code>traits.build</code> database. This introduces you to the basic functions, the user input required, and the manual manipulations required to complete the dataset’s metadata file. The next four tutorials introduce you to progressively more complex datasets, functions, and decisions.</p>
<p>Before you begin this tutorial, ensure you have installed traits.build, cloned the traits.build-template repository, and have successfully build a database from the datasets in <code>traits.build-template</code> . Instructions are available at <a href="tutorial_compilation.html">Tutorial: Example compilation</a>.</p>
<section id="goals" class="level3">
<h3 class="anchored" data-anchor-id="goals">Goals</h3>
<ul>
<li><p>Learn how to <a href="#build_metadata">build a metadata.yml file</a> for a dataset.</p></li>
<li><p>Learn how to <a href="#build_pipline">merge a new dataset</a> into a <code>traits.build</code> database.</p></li>
</ul>
</section>
<section id="new-functions-introduced" class="level3">
<h3 class="anchored" data-anchor-id="new-functions-introduced">New Functions Introduced</h3>
<ul>
<li><p>metadata_create_template</p></li>
<li><p>metadata_add_source_doi</p></li>
<li><p>metadata_add_locations</p></li>
<li><p>metadata_add_traits</p></li>
<li><p>dataset_test</p></li>
<li><p>build_setup_pipeline</p></li>
</ul>
<hr>
</section>
</section>
<section id="adding-tutorial_dataset_1" class="level2" data-number="18.2">
<h2 data-number="18.2" class="anchored" data-anchor-id="adding-tutorial_dataset_1"><span class="header-section-number">18.2</span> Adding tutorial_dataset_1</h2>
<section id="ensure-the-dataset-folder-contains-the-correct-data-files" class="level3">
<h3 class="anchored" data-anchor-id="ensure-the-dataset-folder-contains-the-correct-data-files">Ensure the dataset folder contains the correct data files</h3>
<p>In the traits.build-template repository, there is a folder titled <code>tutorial_dataset_1</code> within the data folder.&nbsp;</p>
<ul>
<li><p>Ensure that this folder exists on your computer.&nbsp;</p></li>
<li><p>The file <code>data.csv</code> exists within the <code>tutorial_dataset_1</code> folder.&nbsp;</p></li>
<li><p>There is a folder <code>raw</code> nested within the <code>tutorial_dataset_1</code> folder, that contains one file, <code>notes.txt</code>.&nbsp;</p></li>
</ul>
</section>
<section id="source-necessary-functions" class="level3">
<h3 class="anchored" data-anchor-id="source-necessary-functions">source necessary functions</h3>
<ul>
<li>Source the functions in the <code>traits.build</code> package:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(traits.build)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build_metadata" class="level3">
<h3 class="anchored" data-anchor-id="build_metadata">Use functions to create a metadata.yml file</h3>
<section id="create-a-metadata-template" class="level4">
<h4 class="anchored" data-anchor-id="create-a-metadata-template"><strong>Create a metadata template</strong></h4>
<p>All dataset metadata is documented within a .yml file that also resides within the dataset’s folder.</p>
<p>A function quickly creates the skeletal <code>metadata.yml</code> file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata_create_template</span>(<span class="st">"tutorial_dataset_1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This function cycles through a series of user-input menus, querying about both the data format (long versus wide) and which columns contain which variables (taxon name, location name, individual identifiers, collection date).<br>
</p>
<p>The menus are shown below, with the menu in <span style="color:blue;"><strong>blue</strong></span> and the appropriate user input in <span style="color:red;"><strong>red</strong></span>.</p>
<p><span style="color:blue;">Is the data long or wide format?</span><br>
</p>
<p><span style="color:blue;">1: Long</span><br>
<span style="color:blue;">2: Wide</span></p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>2</strong></span></p>
<p>This dataset is considered <code>wide</code>, because the data for each trait is documented in its own column.</p>
<p><span style="color:blue;">Select column for taxon_name</span><br>
</p>
<p><span style="color:blue;">1: Species</span><br>
<span style="color:blue;">2: site</span><br>
<span style="color:blue;">3: LMA (mg mm-2)</span><br>
<span style="color:blue;">4: Leaf nitrogen (mg mg-1)</span><br>
<span style="color:blue;">5: leaf size (mm2)</span><br>
<span style="color:blue;">6: latitude (deg)</span><br>
<span style="color:blue;">7: longitude (deg)</span><br>
<span style="color:blue;">8: description`</span></p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>1</strong></span></p>
<p>Select <span style="color:red;"><code>1</code></span> since <code>taxon names</code> are documented in the column <code>Species</code>.</p>
<p><span style="color:blue;">Select column for location_name</span></p>
<p><span style="color:blue;">1: NA</span><br>
<span style="color:blue;">2: Species</span><br>
<span style="color:blue;">3: site</span><br>
<span style="color:blue;">4: LMA (mg mm-2)</span><br>
<span style="color:blue;">5: Leaf nitrogen (mg mg-1)</span><br>
<span style="color:blue;">6: leaf size (mm2)</span><br>
<span style="color:blue;">7: latitude (deg)</span><br>
<span style="color:blue;">8: longitude (deg)</span><br>
<span style="color:blue;">9: description</span></p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>3</strong></span></p>
<p>Select <code>3</code> since <code>location names</code> are documented in the column <code>site</code>.</p>
<p><span style="color:blue;">Select column for individual_id</span></p>
<p><span style="color:blue;">1: NA</span><br>
<span style="color:blue;">2: Species</span><br>
<span style="color:blue;">3: site</span><br>
<span style="color:blue;">4: LMA (mg mm-2)</span><br>
<span style="color:blue;">5: Leaf nitrogen (mg mg-1)</span><br>
<span style="color:blue;">6: leaf size (mm2)</span><br>
<span style="color:blue;">7: latitude (deg)</span><br>
<span style="color:blue;">8: longitude (deg)</span><br>
<span style="color:blue;">9: description</span><br>
</p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>1</strong></span></p>
<p>This dataset does not include a column for <code>individual_id</code>, so <code>1: NA</code> is the appropriate input.</p>
<p><span style="color:blue;">Select column for collection_date</span></p>
<p><span style="color:blue;">1: NA</span><br>
<span style="color:blue;">2: Species</span><br>
<span style="color:blue;">3: site</span><br>
<span style="color:blue;">4: LMA (mg mm-2)</span><br>
<span style="color:blue;">5: Leaf nitrogen (mg mg-1)</span><br>
<span style="color:blue;">6: leaf size (mm2)</span><br>
<span style="color:blue;">7: latitude (deg)</span><br>
<span style="color:blue;">8: longitude (deg)</span><br>
<span style="color:blue;">9: description</span></p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>1</strong></span></p>
<p>This dataset does not include a column for <code>collection_date</code>, so <code>1: NA</code> is the appropriate input.</p>
<p>A follow-up question then allows you to add a fixed <code>collection_date</code> as a range. The information can be manually updated later.</p>
<p><span style="color:blue;">Enter collection_date range in format ‘2007/2009’:</span> <span style="color:red;"><strong>2002-11/2002-11</strong></span><br>
</p>
<p>A final user prompt asks if, for any traits, a sequence of rows represents repeat observations.&nbsp;</p>
<p><span style="color:blue;">Do all traits need <code>repeat_measurements_id</code>’s?</span></p>
<p><span style="color:blue;">1: Yes</span> <span style="color:blue;">2: No</span></p>
<p>This only occurs if the dataset documents response curve data (e.g.&nbsp;an A-ci or light response curve for plants; or a temperature response curve for animal or plant behaviour) and the answer is almost always <code>no</code>.<br>
</p>
<p><span style="color:red;"><strong>2</strong></span><br>
</p>
<p><em>Navigate to the dataset’s folder to find the metadata.yml file.</em><br>
</p>
<p><em>Open this file in Visual Studio Code (or another text-based editor of choice; NOT Word!), so you can see how it is progressively filled in as you work through the next steps.</em></p>
<hr>
</section>
<section id="propagate-source-information-into-the-metadata.yml-file" class="level4">
<h4 class="anchored" data-anchor-id="propagate-source-information-into-the-metadata.yml-file"><strong>Propagate source information into the metadata.yml file</strong></h4>
<p>This dataset is from a published source with a <code>doi</code> and therefore the source information can be added with a single line of code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata_add_source_doi</span>(<span class="at">dataset_id =</span> <span class="st">"tutorial_dataset_1"</span>, <span class="at">doi =</span> <span class="st">"10.1111/j.0022-0477.2005.00992.x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following information is automatically propagated into the source field:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>primary<span class="sc">:</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  key<span class="sc">:</span> Test_1</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  bibtype<span class="sc">:</span> Article</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  year<span class="sc">:</span> <span class="st">'2005'</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  author<span class="sc">:</span> Daniel S. Falster and Mark Westoby</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  journal<span class="sc">:</span> Journal of Ecology</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  title<span class="sc">:</span> Alternative height strategies among <span class="dv">45</span> dicot rain forest species from tropical Queensland, Australia</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  volume<span class="sc">:</span> <span class="st">'93'</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  number<span class="sc">:</span> <span class="st">'3'</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  pages<span class="sc">:</span> <span class="dv">521</span><span class="sc">--</span><span class="dv">535</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  doi<span class="sc">:</span> <span class="fl">10.1111</span><span class="sc">/</span>j<span class="fl">.0022</span><span class="dv">-0477</span>.<span class="dv">2005</span>.<span class="fl">00992.</span>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you’ve run this line of code, look at the metadata file to confirm:</p>
<ol type="1">
<li>the authors’ names are formatted as <code>first name last name</code> or <code>first initial last name</code> (<code>Daniel S. Falster</code> or <code>D. S. Falster</code> if first names weren’t available)<br>
</li>
<li>sequential author’s names are separated by <code>and</code>&nbsp;</li>
<li>the article title is in sentence case<br>
</li>
<li>the page numbers are filled in as a range, separated by a double dash (<code>521--535</code> is correct)&nbsp;</li>
</ol>
<p><em>Note, there is also a function <code>metadata_add_source_bibtex</code> if your source information is in this format.</em></p>
<hr>
</section>
<section id="add-location-details" class="level4">
<h4 class="anchored" data-anchor-id="add-location-details"><strong>Add location details</strong></h4>
<p>Location data can be automatically propagated into the metadata file if it is available in tabular format. For instance, for this study:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>locations <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="st">"data/tutorial_dataset_1/data.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(site, description, <span class="st">`</span><span class="at">latitude (deg)</span><span class="st">`</span>, <span class="st">`</span><span class="at">longitude (deg)</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">distinct</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can then add this location information directly into the metadata file by running:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata_add_locations</span>(<span class="at">dataset_id =</span> <span class="st">"tutorial_dataset_1"</span>, <span class="at">location_data =</span> locations)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This leads to the following user prompts:</p>
<p><span style="color:blue;">Select column for location_name</span>&nbsp;</p>
<p><span style="color:blue;">1: site</span><br>
<span style="color:blue;">2: description</span><br>
<span style="color:blue;">3: latitude (deg)</span><br>
<span style="color:blue;">4: longitude (deg)</span><br>
</p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>1</strong></span>&nbsp;</p>
<p>Select the same column that you indicated contained <code>location</code> names when you created the metadata template.</p>
<p><span style="color:blue;">Indicate all columns you wish to keep as distinct location_properties in tutorial_dataset_1 (by number separated by space; e.g.&nbsp;‘1 2 4’):</span><br>
</p>
<p><span style="color:blue;">1: description</span><br>
<span style="color:blue;">2: latitude (deg)</span><br>
<span style="color:blue;">3: longitude (deg)</span><br>
</p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>1 2 3</strong></span></p>
<p>Select all columns that include <code>location properties</code> that should be documented within the <code>metadata.yml</code> file. In this case, it is all three columns.</p>
<p><span style="color:blue;">Following locations added to metadata for tutorial_dataset_1: ‘Atherton’, ‘Cape Tribulation’</span><br>
<span style="color:blue;">with variables ‘description’, ‘latitude (deg)’, ‘longitude (deg)’</span><br>
<span style="color:blue;">Please complete information in data/tutorial_dataset_1/metadata.yml</span><br>
</p>
<p>All available location data has now been automatically added to the <code>metadata.yml</code> file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>locations<span class="sc">:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  Atherton<span class="sc">:</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    description<span class="sc">:</span> Tropical rain forest vegetation</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">latitude</span> (deg)<span class="sc">:</span> <span class="sc">-</span><span class="fl">17.117</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">longitude</span> (deg)<span class="sc">:</span> <span class="fl">145.65</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  Cape Tribulation<span class="sc">:</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    description<span class="sc">:</span> Complex mesophyll vine forest <span class="cf">in</span> tropical rain forest</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">latitude</span> (deg)<span class="sc">:</span> <span class="sc">-</span><span class="fl">16.1</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">longitude</span> (deg)<span class="sc">:</span> <span class="fl">145.45</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="add-traits" class="level4">
<h4 class="anchored" data-anchor-id="add-traits"><strong>Add traits</strong></h4>
<p>The next step is to select which columns in the <code>data.csv</code> file have trait information you want to include in the database.</p>
<p>The function <code>metadata_add_traits</code> automatically adds the trait-scaffold to <code>metadata.yml</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metadata_add_traits</span>(<span class="at">dataset_id =</span> <span class="st">"tutorial_dataset_1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The user is prompted to select the columns with trait data.</p>
<p><span style="color:blue;">Indicate all columns you wish to keep as distinct traits in tutorial_dataset_1 (by number separated by space; e.g.&nbsp;‘1 2 4’):</span><br>
</p>
<p><span style="color:blue;">1: Species</span><br>
<span style="color:blue;">2: site</span><br>
<span style="color:blue;">3: LMA (mg mm-2)</span><br>
<span style="color:blue;">4: Leaf nitrogen (mg mg-1)</span><br>
<span style="color:blue;">5: leaf size (mm2)</span><br>
<span style="color:blue;">6: latitude (deg)</span><br>
<span style="color:blue;">7: longitude (deg)</span><br>
<span style="color:blue;">8: description</span><br>
</p>
<p><span style="color:blue;">Selection:</span> <span style="color:red;"><strong>3 4 5</strong></span><br>
</p>
<p>You select columns 3, 4, 5, as these contain trait data.</p>
<p><span style="color:blue;">Following traits added to metadata for tutorial_dataset_1: ‘LMA (mg mm-2)’, ‘Leaf nitrogen (mg mg-1)’, ‘leaf size (mm2)’</span><br>
<span style="color:blue;">Please complete information in data/tutorial_dataset_1/metadata.yml</span><br>
</p>
<p><code>metadata.yml</code> now includes a framework in which to manually fill in details about each trait:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>traits<span class="sc">:</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span> var_in<span class="sc">:</span> <span class="fu">LMA</span> (mg mm<span class="dv">-2</span>)  </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  unit_in<span class="sc">:</span> unknown  </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  trait_name<span class="sc">:</span> unknown  </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  entity_type<span class="sc">:</span> unknown  </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  value_type<span class="sc">:</span> unknown  </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  basis_of_value<span class="sc">:</span> unknown  </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  replicates<span class="sc">:</span> unknown  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  methods<span class="sc">:</span> unknown  </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span> var_in<span class="sc">:</span> Leaf <span class="fu">nitrogen</span> (mg mg<span class="dv">-1</span>)  </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  unit_in<span class="sc">:</span> unknown  </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  trait_name<span class="sc">:</span> unknown  </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  entity_type<span class="sc">:</span> unknown  </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  value_type<span class="sc">:</span> unknown  </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  basis_of_value<span class="sc">:</span> unknown  </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  replicates<span class="sc">:</span> unknown  </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  methods<span class="sc">:</span> unknown  </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span> var_in<span class="sc">:</span> leaf <span class="fu">size</span> (mm2)  </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  unit_in<span class="sc">:</span> unknown  </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  trait_name<span class="sc">:</span> unknown  </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  entity_type<span class="sc">:</span> unknown  </span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  value_type<span class="sc">:</span> unknown  </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  basis_of_value<span class="sc">:</span> unknown  </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  replicates<span class="sc">:</span> unknown  </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  methods<span class="sc">:</span> unknown  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
</section>
<section id="manual-filling-in-of-metadata" class="level3">
<h3 class="anchored" data-anchor-id="manual-filling-in-of-metadata">Manual filling in of metadata</h3>
<p>The remaining fields within the metadata.yml file must now be filled in manually.</p>
<p>These include:<br>
<em>the <code>contributors</code> section</em><br>
<em>the <code>description</code>, <code>basis_of_record</code>, <code>life_stage</code>, <code>sampling_strategy</code>, <code>original_file</code>, and <code>notes</code> under the <code>dataset</code> section</em><br>
<em>details for each trait, including <code>unit_in</code>, <code>trait_name</code>, <code>entity_type</code>, <code>value_type</code>, <code>basis_of_record</code>, <code>replicates</code> and <code>methods</code></em></p>
<p>These are all fields that contain the word <code>unknown</code>.</p>
<section id="adding-contributors" class="level4">
<h4 class="anchored" data-anchor-id="adding-contributors"><strong>Adding contributors</strong></h4>
<table class="table">
<thead>
<tr class="header">
<th>Contributor field</th>
<th>Information to add</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>last_name, first_name</td>
<td>The contributors first and last names should be available from the source</td>
</tr>
<tr class="even">
<td>ORCID</td>
<td>Contributors are identified by their ORCID, available for most active researches at <a href="https://orcid.org/">orcid.org</a></td>
</tr>
<tr class="odd">
<td>affiliation</td>
<td>Available from the source or the orcid.org website. Use the same syntax for the same affiliation throughout your database.</td>
</tr>
<tr class="even">
<td>additional_role</td>
<td>For the lead dataset contributor, add the field: <code>additional_role: contact</code></td>
</tr>
</tbody>
</table>
<ul>
<li><p>You can add multiple data collectors by duplicating the relevant 4 lines of code; see the <a href="adding_data.html">Adding dataset vignette</a> for protocols on who to add as a data collector.</p></li>
<li><p>The line <code>assistants:</code> can be deleted if there aren’t any assistants’ names to add.</p></li>
<li><p>Add yourself as the <code>dataset_curator</code>.<br>
</p></li>
</ul>
</section>
<section id="dataset-fields" class="level4">
<h4 class="anchored" data-anchor-id="dataset-fields"><strong>Dataset fields</strong></h4>
<ul>
<li><p>The file <code>data/tutorial_dataset_1/raw/tutorial_dataset_1_notes.txt</code> indicates how to fill in the <code>unknown</code> dataset fields for this study.</p></li>
<li><p>In general, the information to fill in these fields should be available from the source (article) or obtained directly from the dataset contributor.<br>
</p></li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th>Dataset field</th>
<th>Information to add</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>basis_of_record</td>
<td>See <a href="https://github.com/traitecoevo/traits.build/blob/develop/inst/support/traits.build_schema.yml">traits.build_schema</a> for allowable terms.</td>
</tr>
<tr class="even">
<td>life_stage</td>
<td>See <a href="https://github.com/traitecoevo/traits.build/blob/develop/inst/support/traits.build_schema.yml">traits.build_schema</a> for allowable terms.</td>
</tr>
<tr class="odd">
<td>description</td>
<td>A 1-2 sentence summary of the dataset. This can generally be formulated by information in the abstract.</td>
</tr>
<tr class="even">
<td>sampling_stategy</td>
<td>A description of how sites and sampling protocols were chosen. Can generally be taken verbatim from the methods section of a manuscript.</td>
</tr>
<tr class="odd">
<td>original_file</td>
<td>Name of the file submitted by the data contributor and archived in the raw folder.</td>
</tr>
<tr class="even">
<td>notes</td>
<td>none (or <code>.na</code>) for this study, but any notes added by the data curator about data quality, edits to the data during dataset curation.</td>
</tr>
</tbody>
</table>
</section>
<section id="trait-details" class="level4">
<h4 class="anchored" data-anchor-id="trait-details"><strong>Trait details</strong></h4>
<section id="trait_name" class="level5">
<h5 class="anchored" data-anchor-id="trait_name"><strong>trait_name</strong></h5>
<p>The <code>trait_name</code> must match a <code>trait_name</code> within the <a href="https://github.com/traitecoevo/traits.build-template/blob/master/config/traits.yml">traits dictionary</a>. For this example:</p>
<table class="table">
<thead>
<tr class="header">
<th>column in dataset</th>
<th>trait concept</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>LMA (mg mm-2)</td>
<td>leaf_mass_per_area</td>
</tr>
<tr class="even">
<td>Leaf nitrogen (mg mg-1)</td>
<td>leaf_N_per_dry_mass</td>
</tr>
<tr class="odd">
<td>leaf size (mm2)</td>
<td>leaf_area</td>
</tr>
</tbody>
</table>
<p>A dataset curator must be familiar with the likely traits in their discipline to accurately match those in a contributed dataset to traits in the dictionary, and be able to determine if a new trait definition is warranted.</p>
</section>
<section id="unit_in" class="level5">
<h5 class="anchored" data-anchor-id="unit_in"><strong>unit_in</strong></h5>
<p>Units are formatted according to the <a href="https://ucum.org/ucum">UCUM convention</a>:</p>
<ul>
<li>units in the numerator are separated by a ‘.’/</li>
<li>units in the denominator are each preceded by a ‘/’./</li>
<li>“extra” information that is commonly informally included as part of the units for clarity can be included in curly brackets, {}</li>
</ul>
<p>As examples:</p>
<table class="table">
<thead>
<tr class="header">
<th>units</th>
<th>UCUM format</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>milligram per square millimetre</td>
<td>mg/mm2</td>
</tr>
<tr class="even">
<td>micromole per square metre second</td>
<td>umol/m2/s</td>
</tr>
<tr class="odd">
<td>micromole carbon dioxide per square metre second</td>
<td>umol{CO2}/m2/s</td>
</tr>
</tbody>
</table>
<p>If the units being read in for a specific trait differ from those defined for the trait in the <a href="https://github.com/traitecoevo/traits.build-template/blob/master/config/traits.yml">traits dictionary</a> the trait values are converted using the conversion rules specified in <a href="https://github.com/traitecoevo/traits.build-template/blob/master/config/unit_conversions.csv">unit_conversions.csv</a>.</p>
</section>
<section id="entity_type-value_type-basis_of_value-replicates-methods" class="level5">
<h5 class="anchored" data-anchor-id="entity_type-value_type-basis_of_value-replicates-methods"><strong>entity_type, value_type, basis_of_value, replicates, methods</strong></h5>
<table class="table">
<thead>
<tr class="header">
<th>field</th>
<th>value for this dataset</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>entity_type</td>
<td>population</td>
<td>The entity corresponding to the trait value. Uses a controlled vocabulary. See <a href="https://github.com/traitecoevo/traits.build/blob/develop/inst/support/traits.build_schema.yml">traits.build_schema</a> for allowable terms.</td>
</tr>
<tr class="even">
<td>value_type</td>
<td>mean</td>
<td>The statistical nature of the trait value. Uses a controlled vocabulary. See <a href="https://github.com/traitecoevo/traits.build/blob/develop/inst/support/traits.build_schema.yml">traits.build_schema</a> for allowable terms.</td>
</tr>
<tr class="odd">
<td>basis_of_value</td>
<td>measurement</td>
<td>How the trait value was obtained. See <a href="https://github.com/traitecoevo/traits.build/blob/develop/inst/support/traits.build_schema.yml">traits.build_schema</a> for allowable terms.</td>
</tr>
<tr class="even">
<td>replicates</td>
<td>3</td>
<td>The number of replicate measurements that comprise the trait measurement recorded in the spreadsheet.</td>
</tr>
<tr class="odd">
<td>methods</td>
<td>See the study’s <a href="https://github.com/traitecoevo/traits.build-template/blob/data/tutorial_dataset_1/raw/metadata_notes.txt">metadata_notes.txt</a> file</td>
<td>A verbatim (free-form) text field documenting the methods used to collect the trait measurements. This is generally available from the reference or directly from the author.</td>
</tr>
</tbody>
</table>
<p><em>The values for <code>entity_type</code>, <code>value_type</code>, <code>basis_of_value</code>, and <code>replicates</code> can vary by trait – and indeed by measurement – but for this study are identical for all traits.</em></p>
</section>
</section>
<section id="final-steps" class="level4">
<h4 class="anchored" data-anchor-id="final-steps"><strong>Final steps</strong></h4>
<section id="double-check-the-metadata.yml-file" class="level5">
<h5 class="anchored" data-anchor-id="double-check-the-metadata.yml-file"><strong>double check the metadata.yml file</strong></h5>
<p>You should now have a completed <code>metadata.yml</code> file, with no <code>unknown</code> fields.</p>
<p>You’ll notice five sections we haven’t used, <code>contexts</code>, <code>substitutions</code>, <code>taxonomic_updates</code>, <code>exclude_observations</code>, and <code>questions</code>.</p>
<p>These should each contain an <code>.na</code> (as in <code>substitutions: .na</code>). They will be explored in future lessons.</p>
</section>
<section id="run-tests-on-the-metadata-file" class="level5">
<h5 class="anchored" data-anchor-id="run-tests-on-the-metadata-file"><strong>run tests on the metadata file</strong></h5>
<p>Confirm there are no errors in the <code>metadata.yml</code> file:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dataset_test</span>(<span class="st">"tutorial_dataset_1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This <em>should</em> result in the following output:</p>
<p><span style="color:blue;">[ FAIL 0 | WARN 0 | SKIP 0 | PASS 79 ]</span><br>
</p>
</section>
<section id="build_pipline" class="level5">
<h5 class="anchored" data-anchor-id="build_pipline"><strong>add dataset to the database</strong></h5>
<p>Next add the dataset_id to the build file that builds the database and rebuild the database</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">build_setup_pipeline</span>(<span class="at">method =</span> <span class="st">"base"</span>, <span class="at">database_name =</span> <span class="st">"traits.build_database"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"build.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="build-dataset-report" class="level5">
<h5 class="anchored" data-anchor-id="build-dataset-report"><strong>build dataset report</strong></h5>
<p>As a final step, build a report for the study</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>traits.build_database<span class="sc">$</span>build_info<span class="sc">$</span>version <span class="ot">&lt;-</span> <span class="st">"5.0.0"</span>  <span class="co"># a fix because the function was built around specific AusTraits versions</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dataset_report</span>(<span class="st">"tutorial_dataset_1"</span>, traits.build_database, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Have a look at the report, but there reports become much more interesting once there are more datasets in the database.</p>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./tutorial_datasets.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Tutorial: Adding datasets</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./tutorial_dataset_2.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Tutorial 2: Adding a more complex dataset</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">How to get help: <a href="https://traitecoevo.github.io/traits.build-book/help.html" class="uri">https://traitecoevo.github.io/traits.build-book/help.html</a><br>Copyright 2023, Daniel Falster and Elizabeth Wenk</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>